<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1 class="title">YouTube Search</h1>
        <input id="search-input" class="search-box" type="text" placeholder="Search videos...">
        <button id="search-button">Search</button>
        <div id="search-results"></div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const searchButton = document.getElementById("search-button");
            const searchInput = document.getElementById("search-input");
            const searchResults = document.getElementById("search-results");
        
            searchButton.addEventListener("click", performSearch);
            searchInput.addEventListener("keyup", function(event) {
                if (event.key === "Enter") {
                    performSearch();
                }
            });
        
            function performSearch() {
                const searchTerm = searchInput.value;
        
                fetch('/search', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json' 
                    },
                    body: JSON.stringify({ searchTerm })
                })
                .then(response => response.json())
                .then(data => {
                    searchResults.innerHTML = '';
        
                    if (data && data.items) {
                        data.items.forEach(item => {
                            const videoTitle = item.snippet.title;
                            const videoId = item.id.videoId;
        
                            const videoLink = document.createElement('a');
                            videoLink.href = `https://www.youtube.com/watch?v=${videoId}`;
                            videoLink.target = '_blank';
                            videoLink.textContent = videoTitle;
        
                            const resultItem = document.createElement('div');
                            resultItem.classList.add('result-item');
                            resultItem.appendChild(videoLink);
        
                            searchResults.appendChild(resultItem);
                        });
                    } else {
                        searchResults.textContent = '검색 결과가 없습니다.';
                    }
                })
                .catch(error => {
                    console.error(error);
                    searchResults.textContent = '서버 응답 오류';
                });
            }
        });
    </script>
    <script src="client.js"></script>
</body>
</html>

